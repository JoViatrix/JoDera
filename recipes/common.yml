modules:
  - type: script
    snippets:
      - "curl -L -o /usr/bitwarden.rpm 'https://vault.bitwarden.com/download/?app=desktop&platform=linux&variant=rpm'"
  
  - type: files
    files:
      - source: bitwarden
        destination: /

  - type: rpm-ostree
    repos:
      - https://repo.librewolf.net/librewolf.repo
      - https://dl.winehq.org/wine-builds/fedora/41/winehq.repo
      - /usr/bitwarden.rpm
    optfix:
      - wine-staging
      - Bitwarden
    install:
      - btrbk
      - corectrl
      - ddrescue
      - dosbox
      - gamescope
      - innoextract
      - librewolf
      - mangohud
      - mesa-libd3d
      - mesa-libd3d.i686
      - nextcloud-client-dolphin
      - obs-studio
      - piper
      - screen
      - steam
      - thunderbird
      - waydroid
      - winehq-staging
    remove:
      - firefox
      - firefox-langpacks

  - type: script
    snippets:
      - "rm /usr/bitwarden.rpm"